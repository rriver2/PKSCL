{"ast":null,"code":"import _toConsumableArray from\"/Users/river2/Desktop/PKSCL/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/river2/Desktop/PKSCL/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{Navbar,Container}from'react-bootstrap';import'./css/ManagementPage.css';import axios from'axios';import{Link,Route,Switch,useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ManagementPage(props){var history=useHistory();var _useState=useState([{\"stdID\":\"a111111111\",\"name\":\"이름1\"},{\"stdID\":\"a22222222\",\"name\":\"이름2\"},{\"stdID\":\"a33333333\",\"name\":\"이름3\"},{\"stdID\":\"a111111111\",\"name\":\"이름1\"},{\"stdID\":\"a22222222\",\"name\":\"이름2\"},{\"stdID\":\"a33333333\",\"name\":\"이름3\"},{\"stdID\":\"a111111111\",\"name\":\"이름1\"},{\"stdID\":\"a22222222\",\"name\":\"이름2\"},{\"stdID\":\"a33333333\",\"name\":\"이름3\"},{\"stdID\":\"a111111111\",\"name\":\"이름1\"},{\"stdID\":\"a22222222\",\"name\":\"이름2\"},{\"stdID\":\"a33333333\",\"name\":\"이름3\"}]),_useState2=_slicedToArray(_useState,2),waiting=_useState2[0],setWaiting=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),refusal=_useState4[0],setRefusal=_useState4[1];var _useState5=useState([{\"stdID\":\"b11111111\",\"name\":\"1이름\"},{\"stdID\":\"b22222222\",\"name\":\"2이름\"},{\"stdID\":\"b33333333\",\"name\":\"3이름\"},{\"stdID\":\"b44444444\",\"name\":\"4이름\"},{\"stdID\":\"b5555555\",\"name\":\"5이름\"},{\"stdID\":\"b11111111\",\"name\":\"1이름\"},{\"stdID\":\"b22222222\",\"name\":\"2이름\"},{\"stdID\":\"b33333333\",\"name\":\"3이름\"},{\"stdID\":\"b44444444\",\"name\":\"4이름\"},{\"stdID\":\"b5555555\",\"name\":\"5이름\"},{\"stdID\":\"b11111111\",\"name\":\"1이름\"},{\"stdID\":\"b22222222\",\"name\":\"2이름\"},{\"stdID\":\"b33333333\",\"name\":\"3이름\"},{\"stdID\":\"b44444444\",\"name\":\"4이름\"},{\"stdID\":\"b5555555\",\"name\":\"5이름\"}]),_useState6=_slicedToArray(_useState5,2),approval=_useState6[0],setApproval=_useState6[1];var _useState7=useState(_toConsumableArray(waiting)),_useState8=_slicedToArray(_useState7,2),leftTable=_useState8[0],setLeftTable=_useState8[1];var _useState9=useState(_toConsumableArray(approval)),_useState10=_slicedToArray(_useState9,2),rightTable=_useState10[0],setRightTable=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),leftCheckedList=_useState12[0],setLeftCheckedList=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),rightCheckedList=_useState14[0],setRightCheckedList=_useState14[1];var changeHandler=function changeHandler(checked,studentInfo,setCheckedList,checkedList){if(checked){setCheckedList([].concat(_toConsumableArray(checkedList),[studentInfo]));}else{setCheckedList(checkedList.filter(function(e){return e!==studentInfo;}));}console.log(checked);};var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),searchStudent=_useState16[0],setSearchStudent=_useState16[1];var _useState17=useState(\"search\"),_useState18=_slicedToArray(_useState17,2),searchButton=_useState18[0],setSearchButton=_useState18[1];function patchStudent(studentStatus){var payload;if(studentStatus===\"approval\"||studentStatus===\"refusal\"){payload=leftCheckedList;}else if(studentStatus===\"delegating\"||studentStatus===\"waiting\"){payload=rightCheckedList;}else{alert(\"error!\");}if(props.loginPosition===\"president\"){axios.patch('/student-list/',payload).then(function(payload){setWaiting(_toConsumableArray(payload.data.studentPresidentList.waiting));setRefusal(_toConsumableArray(payload.data.studentPresidentList.refusal));setApproval(_toConsumableArray(payload.data.studentPresidentList.approval));}).catch(function(error){alert(\"학생 전송에 실패했습니다 :)\");});}else if(props.loginPosition===\"admin\"){axios.patch('/student-president-list/',payload).then(function(payload){setWaiting(_toConsumableArray(payload.data.studentPresidentList.waiting));setRefusal(_toConsumableArray(payload.data.studentPresidentList.refusal));setApproval(_toConsumableArray(payload.data.studentPresidentList.approval));}).catch(function(error){alert(\"학생 전송에 실패했습니다 :)\");});}}useEffect(function(){axios.get('/manage').then(function(payload){setWaiting(_toConsumableArray(payload.data.studentPresidentList.waiting));setRefusal(_toConsumableArray(payload.data.studentPresidentList.refusal));setApproval(_toConsumableArray(payload.data.studentPresidentList.approval));}).catch(function(error){alert(\"학과리스트를 불러올 수 없습니다.\");});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"ManagementPageContainer\",children:[/*#__PURE__*/_jsx(Navbar,{expand:\"lg\",style:{padding:\"30px 0\"},children:/*#__PURE__*/_jsxs(Container,{fluid:true,style:{justifyContent:\"center\",backgroundColor:\"none\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:\"0\"},children:\"\\uD559\\uC0DD\\uC2B9\\uC778 \\uD604\\uD669\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchBar\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setSearchStudent(e.target.value);setSearchButton(\"search\");if(e.target.value===\"\"){setSearchButton(\"search\");setLeftTable(_toConsumableArray(waiting));setRightTable(_toConsumableArray(approval));}},name:\"q\",value:searchStudent,type:\"search\",placeholder:\"Search\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){if(searchButton===\"x\"){setSearchStudent(\"\");setSearchButton(\"search\");setLeftTable(_toConsumableArray(waiting));setRightTable(_toConsumableArray(approval));}else{if(searchStudent===\"\"){alert(\"검색명을 입력해주세요 :)\");}else{setSearchButton(\"x\");var left=waiting.filter(function(item){return item.name.includes(searchStudent)||item.stdID.includes(searchStudent);});var right=approval.filter(function(item){return item.name.includes(searchStudent)||item.stdID.includes(searchStudent);});setLeftTable(left);setRightTable(right);}}},className:\"searchButton\",type:\"button\",children:searchButton===\"search\"?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tables\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tableSet\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"submitButton\",onClick:function onClick(){if(leftCheckedList.length===0){alert(\"승인할 학생을 1명 이상 선택하세요 :)\");}else{patchStudent(\"approval\");}setLeftCheckedList([]);},children:\"\\uC2B9\\uC778\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submitButton\",onClick:function onClick(){console.log(\"거절\");setLeftCheckedList([]);if(leftCheckedList.length>0){patchStudent(\"refusal\");}else{alert(\"거절할 학생을 1명 이상 선택하세요 :)\");}},children:\"\\uAC70\\uC808\"})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{colSpan:\"3\",style:{borderTopRightRadius:\"20px\",borderTopLeftRadius:\"20px\"},children:\"\\uC2B9\\uC778\\uB300\\uAE30\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"tableRadius\",style:{borderBottomRightRadius:\"20px\",borderBottomLeftRadius:\"20px\"},children:/*#__PURE__*/_jsx(\"tbody\",{className:\"tableList\",style:{borderBottomRightRadius:\"20px\",borderBottomLeftRadius:\"20px\"},children:leftTable.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:\"\\uC2B9\\uC778\\uB300\\uAE30 \\uD559\\uC0DD\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})}):leftTable.map(function(student,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:student.stdID}),/*#__PURE__*/_jsx(\"td\",{children:student.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:student,type:\"checkbox\",onChange:function onChange(e){changeHandler(e.target.checked,student,setLeftCheckedList,leftCheckedList);},checked:leftCheckedList.includes(student)?true:false})})]},i);})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tableSet\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"submitButton\",style:{width:\"110px\"},onClick:function onClick(){if(rightCheckedList.length===1){setRightCheckedList([]);patchStudent(\"delegating\");}else{alert(\"학생회장 위임은 한명만 가능합니다.\");}},children:\"\\uD68C\\uC7A5\\uAD8C\\uD55C\\uC704\\uC784\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submitButton\",onClick:function onClick(){setRightCheckedList([]);if(rightCheckedList.length>0){patchStudent(\"waiting\");}},children:\"\\uB300\\uAE30\"})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{colSpan:\"3\",style:{borderTopRightRadius:\"20px\",borderTopLeftRadius:\"20px\"},children:\"\\uC2B9\\uC778\\uC644\\uB8CC\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"tableRadius\",style:{borderBottomRightRadius:\"20px\",borderBottomLeftRadius:\"20px\"},children:/*#__PURE__*/_jsx(\"tbody\",{className:\"tableList\",style:{borderBottomRightRadius:\"20px\",borderBottomLeftRadius:\"20px\"},children:rightTable.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:\"\\uC2B9\\uC778\\uC644\\uB8CC \\uD559\\uC0DD\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})}):rightTable.map(function(student,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:student.stdID}),/*#__PURE__*/_jsx(\"td\",{children:student.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:student,type:\"checkbox\",onChange:function onChange(e){changeHandler(e.currentTarget.checked,student,setRightCheckedList,rightCheckedList);},checked:rightCheckedList.includes(student)?true:false})})]},i);})})})]})]})]})]});}export default ManagementPage;","map":{"version":3,"sources":["/Users/river2/Desktop/PKSCL/frontend/src/ManagementPage.js"],"names":["useEffect","useState","Navbar","Container","axios","Link","Route","Switch","useHistory","ManagementPage","props","history","waiting","setWaiting","refusal","setRefusal","approval","setApproval","leftTable","setLeftTable","rightTable","setRightTable","leftCheckedList","setLeftCheckedList","rightCheckedList","setRightCheckedList","changeHandler","checked","studentInfo","setCheckedList","checkedList","filter","e","console","log","searchStudent","setSearchStudent","searchButton","setSearchButton","patchStudent","studentStatus","payload","alert","loginPosition","patch","then","data","studentPresidentList","catch","error","get","padding","justifyContent","backgroundColor","margin","target","value","left","item","name","includes","stdID","right","length","borderTopRightRadius","borderTopLeftRadius","borderBottomRightRadius","borderBottomLeftRadius","map","student","i","width","currentTarget"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { Navbar, Container} from 'react-bootstrap';\nimport './css/ManagementPage.css';\nimport axios from 'axios';\nimport { Link, Route, Switch, useHistory } from 'react-router-dom';\n\nfunction ManagementPage(props){\n    const history = useHistory();\n    const [waiting,setWaiting] = useState([\n        {  \n            \"stdID\" : \"a111111111\",\n            \"name\" : \"이름1\"\n        } ,\n        { \n            \"stdID\" : \"a22222222\",\n            \"name\" : \"이름2\"\n        },\n        {\n            \"stdID\" : \"a33333333\",\n            \"name\" : \"이름3\"\n        },\n        {  \n            \"stdID\" : \"a111111111\",\n            \"name\" : \"이름1\"\n        } ,\n        { \n            \"stdID\" : \"a22222222\",\n            \"name\" : \"이름2\"\n        },\n        {\n            \"stdID\" : \"a33333333\",\n            \"name\" : \"이름3\"\n        },\n        {  \n            \"stdID\" : \"a111111111\",\n            \"name\" : \"이름1\"\n        } ,\n        { \n            \"stdID\" : \"a22222222\",\n            \"name\" : \"이름2\"\n        },\n        {\n            \"stdID\" : \"a33333333\",\n            \"name\" : \"이름3\"\n        },\n        {  \n            \"stdID\" : \"a111111111\",\n            \"name\" : \"이름1\"\n        } ,\n        { \n            \"stdID\" : \"a22222222\",\n            \"name\" : \"이름2\"\n        },\n        {\n            \"stdID\" : \"a33333333\",\n            \"name\" : \"이름3\"\n        }\n    ]);\n\n    const [refusal,setRefusal] = useState([]);\n    const [approval,setApproval] = useState([{  \n        \"stdID\" : \"b11111111\",\n         \"name\" : \"1이름\"\n      } ,\n      { \n         \"stdID\" : \"b22222222\",\n         \"name\" : \"2이름\"\n      },\n      {\n         \"stdID\" : \"b33333333\",\n         \"name\" : \"3이름\"\n      },\n      {\n        \"stdID\" : \"b44444444\",\n        \"name\" : \"4이름\"\n     },\n     {\n        \"stdID\" : \"b5555555\",\n        \"name\" : \"5이름\"\n     },\n    {  \n        \"stdID\" : \"b11111111\",\n         \"name\" : \"1이름\"\n      } ,\n      { \n         \"stdID\" : \"b22222222\",\n         \"name\" : \"2이름\"\n      },\n      {\n         \"stdID\" : \"b33333333\",\n         \"name\" : \"3이름\"\n      },\n      {\n        \"stdID\" : \"b44444444\",\n        \"name\" : \"4이름\"\n     },\n     {\n        \"stdID\" : \"b5555555\",\n        \"name\" : \"5이름\"\n     },\n    {  \n        \"stdID\" : \"b11111111\",\n         \"name\" : \"1이름\"\n      } ,\n      { \n         \"stdID\" : \"b22222222\",\n         \"name\" : \"2이름\"\n      },\n      {\n         \"stdID\" : \"b33333333\",\n         \"name\" : \"3이름\"\n      },\n      {\n        \"stdID\" : \"b44444444\",\n        \"name\" : \"4이름\"\n     },\n     {\n        \"stdID\" : \"b5555555\",\n        \"name\" : \"5이름\"\n     }]);\n     const [leftTable, setLeftTable] = useState([...waiting]);\n     const [rightTable, setRightTable] = useState([...approval]);\n\n     const [leftCheckedList, setLeftCheckedList] = useState([]);\n     const [rightCheckedList, setRightCheckedList] = useState([]);\n\n     const changeHandler = (checked, studentInfo, setCheckedList, checkedList) => {\n       if (checked) {\n        setCheckedList([...checkedList, studentInfo]);\n       } else {\n        setCheckedList(checkedList.filter((e) => e !== studentInfo));\n       }\n       console.log(checked)\n     };\n\n    const [searchStudent, setSearchStudent] = useState(\"\");\n    const [searchButton, setSearchButton] = useState(\"search\");\n\n\n    function patchStudent(studentStatus){\n        let payload;\n        if(studentStatus === \"approval\" || studentStatus === \"refusal\" ){\n            payload = leftCheckedList;\n        }else if(studentStatus === \"delegating\" || studentStatus === \"waiting\" ){\n            payload = rightCheckedList;\n        }else{\n            alert(\"error!\");\n        }\n        if(props.loginPosition === \"president\"){\n            axios.patch('/student-list/', payload)\n            .then((payload) => {\n                setWaiting([...payload.data.studentPresidentList.waiting]);\n                setRefusal([...payload.data.studentPresidentList.refusal]);\n                setApproval([...payload.data.studentPresidentList.approval]);\n            })\n            .catch((error) => {\n            alert(\"학생 전송에 실패했습니다 :)\")\n            });\n        }else if(props.loginPosition === \"admin\"){\n            axios.patch('/student-president-list/', payload)\n            .then((payload) => {\n                setWaiting([...payload.data.studentPresidentList.waiting]);\n                setRefusal([...payload.data.studentPresidentList.refusal]);\n                setApproval([...payload.data.studentPresidentList.approval]);\n            })\n            .catch((error) => {\n            alert(\"학생 전송에 실패했습니다 :)\")\n            });\n        }\n    }\n\n    useEffect(() => {\n    axios.get('/manage')\n      .then((payload) => {\n        setWaiting([...payload.data.studentPresidentList.waiting]);\n        setRefusal([...payload.data.studentPresidentList.refusal]);\n        setApproval([...payload.data.studentPresidentList.approval]);\n      })\n      .catch((error) => {\n        alert(\"학과리스트를 불러올 수 없습니다.\");\n      })\n    }, []);\n  \n\n    return(\n        <div className=\"ManagementPageContainer\">\n            <Navbar expand=\"lg\" style={{padding: \"30px 0\"}}>\n                <Container fluid style={{justifyContent: \"center\", backgroundColor: \"none\"}}>\n                    <h2 style={{margin : \"0\"}}>학생승인 현황</h2>\n                    <div className=\"searchBar\" >\n                        <input onChange={(e) => { \n                            setSearchStudent(e.target.value); \n                            setSearchButton(\"search\");\n                            if(e.target.value === \"\"){\n                                setSearchButton(\"search\");\n                                setLeftTable([...waiting]);\n                                setRightTable([...approval]);\n                            }\n                        }} \n                            name=\"q\" value={searchStudent} type=\"search\" placeholder=\"Search\" ></input>\n                            \n                        <button onClick={(e) => {\n                            if( searchButton === \"x\"){\n                                setSearchStudent(\"\");\n                                setSearchButton(\"search\");\n                                setLeftTable([...waiting]);\n                                setRightTable([...approval]);\n                            }else{\n                                if(searchStudent=== \"\"){\n                                    alert(\"검색명을 입력해주세요 :)\");\n                                }else{\n                                    setSearchButton(\"x\");\n                            \n                                    let left = waiting.filter((item) => (item.name.includes(searchStudent)||item.stdID.includes(searchStudent)));\n                                    let right = approval.filter((item) => (item.name.includes(searchStudent)||item.stdID.includes(searchStudent)));\n\n                                    setLeftTable(left);\n                                    setRightTable(right);\n                                }\n                                \n                            }\n                        }}\n                        \n                            className='searchButton' type='button'>\n                                {\n                                searchButton === \"search\"\n                                ?<i className=\"fas fa-search\"></i>\n                                :<i className=\"fas fa-times\"></i>\n                                }\n                                </button>\n                    </div>\n                </Container>\n            </Navbar>\n            <div className='tables'>\n                <div className='tableSet'>\n                    <div className= \"buttons\">\n                        <button className='submitButton' onClick={()=>{\n                                if(leftCheckedList.length === 0){\n                                    alert(\"승인할 학생을 1명 이상 선택하세요 :)\")\n                                }else{\n                                    patchStudent(\"approval\");\n                                }\n                                setLeftCheckedList([]);\n                            }}>승인</button> \n                        <button className='submitButton' onClick={()=>{\n                                console.log(\"거절\")\n                                setLeftCheckedList([]);\n                                if(leftCheckedList.length > 0){\n                                    patchStudent(\"refusal\");\n                                }else{\n                                    alert(\"거절할 학생을 1명 이상 선택하세요 :)\")\n                                }\n                            }}>거절</button>\n                    </div>\n                    <table >\n                        <thead>\n                            <tr >\n                                <th colSpan={\"3\"} style={{borderTopRightRadius:\"20px\", borderTopLeftRadius:\"20px\"}}>승인대기</th>\n                            </tr>\n                        </thead>\n                        <div className=\"tableRadius\" style={{borderBottomRightRadius:\"20px\", borderBottomLeftRadius:\"20px\"}}>\n                        <tbody className = \"tableList\" style={{borderBottomRightRadius:\"20px\", borderBottomLeftRadius:\"20px\"}}>\n                            {\n                                leftTable.length === 0\n                                ?   <tr>\n                                        <td colSpan={\"3\"}>승인대기 학생이 없습니다.</td>\n                                    </tr>\n                                :leftTable.map((student,i)=>{\n                                    return(\n                                            <tr key={i}>\n                                            <td >{student.stdID}</td>\n                                            <td>{student.name}</td>\n                                            <td ><input \n                                                    id= {student}\n                                                    type=\"checkbox\" \n                                                    onChange={(e)=>{\n                                                    changeHandler(e.target.checked, student ,setLeftCheckedList,leftCheckedList)\n                                                    }}\n                                                    checked={leftCheckedList.includes(student) ? true : false}\n                                            /></td>\n                                        </tr>\n                                    )\n                                })\n                            }\n                        </tbody>\n                            </div>\n                    </table>\n                </div>\n\n                <div className='tableSet'>\n                    <div className= \"buttons\">\n                        <button className='submitButton' style={{width : \"110px\"}} onClick={()=>{\n                                if(rightCheckedList.length === 1){\n                                    setRightCheckedList([]);\n                                    patchStudent(\"delegating\");\n                                }else{\n                                    alert(\"학생회장 위임은 한명만 가능합니다.\");\n                                }\n                            }}>회장권한위임</button> \n                        <button className='submitButton' onClick={()=>{\n                                setRightCheckedList([]);\n                                if(rightCheckedList.length > 0){\n                                    patchStudent(\"waiting\");\n                                }\n                            }}\n                        >대기</button>\n                    </div>\n                     <table>\n                        <thead>\n                            <tr>\n                                <th colSpan={\"3\"} style={{borderTopRightRadius:\"20px\", borderTopLeftRadius:\"20px\"}}>승인완료</th>\n                            </tr>\n                        </thead>\n                        <div className=\"tableRadius\" style={{borderBottomRightRadius:\"20px\", borderBottomLeftRadius:\"20px\"}}>\n                        <tbody className = \"tableList\" style={{borderBottomRightRadius:\"20px\", borderBottomLeftRadius:\"20px\"}}>\n                        {\n                            rightTable.length === 0\n                                ?   <tr>\n                                        <td colSpan={\"3\"}>승인완료 학생이 없습니다.</td>\n                                    </tr>\n                                :rightTable.map((student,i)=>{\n                                    return(\n                                            <tr key={i}>\n                                            <td>{student.stdID}</td>\n                                            <td>{student.name}</td>\n                                            <td><input \n                                                    id= {student}\n                                                    type=\"checkbox\" \n                                                    onChange={(e)=>{\n                                                    changeHandler(e.currentTarget.checked, student ,setRightCheckedList,rightCheckedList)\n                                                    }}\n                                                    checked={rightCheckedList.includes(student) ? true : false}\n                                            /></td>\n                                        </tr>\n                                        \n                                    )\n                                })\n                            }\n                        </tbody>\n                        </div>\n                    </table>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ManagementPage;"]},"metadata":{},"sourceType":"module"}